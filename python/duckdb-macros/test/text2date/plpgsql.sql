CREATE FUNCTION text2date(str VARCHAR) RETURNS DATE AS $$
BEGIN
   RETURN CAST(str AS DATE);
EXCEPTION WHEN OTHERS THEN
   RETURN NULL;
END;
$$ LANGUAGE plpgsql;
